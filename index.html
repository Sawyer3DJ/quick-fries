<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beefeater Quick Order</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #FF6A13; /* Beefeater Orange */
    }
    h1, h2 {
      text-align: center;
    }
    .container {
      width: 80%;
      margin: auto;
      text-align: center;
    }
    button {
      padding: 15px;
      margin-top: 20px;
      width: 100%;
      font-size: 18px;
      cursor: pointer;
      border: none;
    }
    button.green {
      background-color: #4CAF50;
      color: white;
    }
    button.grey {
      background-color: grey;
      color: white;
    }
    .menu-section {
      margin-top: 20px;
    }
    .order-summary {
      margin-top: 30px;
      padding: 20px;
      border: 1px solid #ccc;
      background-color: #fff;
    }
    .order-item {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <!-- Landing Page -->
  <div id="landingPage" class="container">
    <h1>Welcome to Beefeater</h1>
    <button id="startOrderButton" class="green">Start Quick Order</button>
  </div>

  <!-- Menu Page -->
  <div id="menuPage" class="container" style="display: none;">
    <h2>Select your items</h2>
    <div class="menu-section">
      <label>
        <input type="checkbox" value="Large Fries" class="menu-item"> Large Fries (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Cheesy Loaded Fries" class="menu-item"> Cheesy Loaded Fries (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Korean Chicken Fries" class="menu-item"> Korean Chicken Fries (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Large Onion Rings" class="menu-item"> Large Onion Rings (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Water" class="menu-item"> Water (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Coca Cola" class="menu-item"> Coca Cola (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Fanta" class="menu-item"> Fanta (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Latte" class="menu-item"> Latte (£100.00)
      </label><br>
      <label>
        <input type="checkbox" value="Cappuccino" class="menu-item"> Cappuccino (£100.00)
      </label><br>
    </div>
    <button id="submitOrderButton" class="green">Submit Order</button>
  </div>

  <!-- Review Order Page -->
  <div id="reviewPage" class="container" style="display: none;">
    <h2>Review Your Order</h2>
    <div id="orderSummary" class="order-summary">
      <!-- Order summary will go here -->
    </div>
    <button id="goBackButton" class="grey">Go Back</button>
    <button id="placeOrderButton" class="green">Place Order</button>
  </div>

  <!-- Confirmation Page -->
  <div id="confirmationPage" class="container" style="display: none;">
    <h2>Order Placed!</h2>
    <p>Your order has been placed successfully! Please have your payment ready.</p>
  </div>

  <script>
    let order = [];
    
    // Landing Page
    document.getElementById('startOrderButton').onclick = function() {
      document.getElementById('landingPage').style.display = 'none';
      document.getElementById('menuPage').style.display = 'block';
    }

    // Menu Page
    document.getElementById('submitOrderButton').onclick = function() {
      const checkedItems = Array.from(document.querySelectorAll('.menu-item:checked')).map(i => i.value);
      order = checkedItems;
      
      // Display order summary on the Review Order page
      let orderSummaryHtml = '<h3>Your Order:</h3>';
      checkedItems.forEach(item => {
        orderSummaryHtml += `<div class="order-item">${item} (£100.00)</div>`;
      });
      orderSummaryHtml += `<h3>Total: £${checkedItems.length * 100}.00</h3>`;
      document.getElementById('orderSummary').innerHTML = orderSummaryHtml;

      document.getElementById('menuPage').style.display = 'none';
      document.getElementById('reviewPage').style.display = 'block';
    }

    // Review Order Page
    document.getElementById('goBackButton').onclick = function() {
      document.getElementById('reviewPage').style.display = 'none';
      document.getElementById('menuPage').style.display = 'block';
    }

    document.getElementById('placeOrderButton').onclick = function() {
      // Send order to the Flask server using your laptop's IP address
      const table = 'Table 1'; // Placeholder, modify as needed
      const comments = ''; // Placeholder for additional comments
      const orderItems = order;
      const totalPrice = order.length * 100;

      const orderData = {
        table: table,
        items: orderItems,
        comments: comments,
        totalPrice: totalPrice,
        timestamp: new Date().toISOString(),
      };

      // Send order to your laptop's Flask server
      fetch('http://192.168.116.3:5000/receive-order', {  // <-- Use laptop IP address
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(orderData),
      })
      .then(response => response.json())
      .then(data => {
        console.log('Order submitted:', data);
        document.getElementById('reviewPage').style.display = 'none';
        document.getElementById('confirmationPage').style.display = 'block';
      })
      .catch(error => {
        console.error('Error submitting order:', error);
        alert('Failed to submit order. Please check your connection.');
      });
    }
  </script>
</body>
</html>
