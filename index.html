<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Beefeater Quick Order</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #FF6A13; margin: 0; padding: 0; color: #fff; }
    .container { max-width: 500px; margin: auto; padding: 20px; background: #222; border-radius: 10px; margin-top: 30px; }
    h1, h2 { text-align: center; }
    .menu-item { margin: 10px 0; }
    label { display: block; margin-bottom: 5px; }
    button { width: 100%; padding: 12px; font-size: 16px; margin-top: 10px; border: none; border-radius: 5px; cursor: pointer; }
    .green { background-color: #28a745; color: white; }
    .grey { background-color: grey; color: white; }
    textarea { width: 100%; height: 60px; margin-top: 10px; }
  </style>
</head>
<body>

<div class="container" id="landingPage">
  <h1>Welcome to Beefeater</h1>
  <button class="green" onclick="startOrder()">Start Quick Order</button>
</div>

<div class="container" id="menuPage" style="display: none;">
  <h2>Select Your Items</h2>
  <div class="menu-item"><input type="checkbox" value="Large Fries"> Large Fries (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Cheesy Loaded Fries"> Cheesy Loaded Fries (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Korean Chicken Fries"> Korean Chicken Fries (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Large Onion Rings"> Large Onion Rings (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Water"> Water (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Coca Cola"> Coca Cola (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Fanta"> Fanta (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Latte"> Latte (£100.00)</div>
  <div class="menu-item"><input type="checkbox" value="Cappuccino"> Cappuccino (£100.00)</div>
  <textarea id="comments" placeholder="Any allergies or table number?"></textarea>
  <button class="green" onclick="submitOrder()">Submit Order</button>
</div>

<div class="container" id="reviewPage" style="display: none;">
  <h2>Review Your Order</h2>
  <div id="orderSummary"></div>
  <button class="grey" onclick="goBack()">Go Back</button>
  <button class="green" onclick="placeOrder()">Place Order</button>
</div>

<div class="container" id="confirmationPage" style="display: none;">
  <h2>Order Placed Successfully!</h2>
  <p>Please have your payment ready. Thank you!</p>
</div>

<script>
  let order = [];

  function startOrder() {
    document.getElementById('landingPage').style.display = 'none';
    document.getElementById('menuPage').style.display = 'block';
  }

  function submitOrder() {
    order = Array.from(document.querySelectorAll('input[type=checkbox]:checked')).map(i => i.value);
    const comments = document.getElementById('comments').value;
    let summary = order.map(item => `${item} (£100.00)`).join('<br>') + `<br><br><strong>Comments:</strong> ${comments}`;
    summary += `<br><strong>Total:</strong> £${order.length * 100}.00`;
    document.getElementById('orderSummary').innerHTML = summary;
    document.getElementById('menuPage').style.display = 'none';
    document.getElementById('reviewPage').style.display = 'block';
  }

  function goBack() {
    document.getElementById('reviewPage').style.display = 'none';
    document.getElementById('menuPage').style.display = 'block';
  }

  function placeOrder() {
    const comments = document.getElementById('comments').value;

    fetch('http://192.168.116.3:5000/receive-order', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ order: order, comments: comments })
    })
    .then(res => {
      if (!res.ok) throw new Error(`Server responded with ${res.status}`);
      return res.json();
    })
    .then(() => {
      document.getElementById('reviewPage').style.display = 'none';
      document.getElementById('confirmationPage').style.display = 'block';
    })
    .catch(error => {
      console.error('Error sending order:', error);
      alert('Failed to send order. Check if your server is running and the IP is correct.\\nDetails: ' + error);
    });
  }
</script>

</body>
</html>
